let games = [
  {id: 1, provider: "BetConstruct", name: "Live Blackjack", category: {id: 1, name: "Live Dealer",}},
  {id: 2, provider: "BetConstruct", name: "Live Roulette", category: {id: 1, name: "Live Dealer",}},
  {id: 3, provider: "BetConstruct", name: "Live Bet on Poker", category: {id: 1, name: "Live Dealer",}},
  {id: 4, provider: "BetConstruct", name: "Live Baccarat", category: {id: 1, name: "Live Dealer",}},
  {id: 5, provider: "BetConstruct", name: "Captain Nelson Deluxe", category: {id: 1, name: "Live Dealer",}},
  {id: 6, provider: "BetConstruct", name: "Live Blackjack", category: {id: 1, name: "Live Dealer",}},
  {id: 7, provider: "BetConstruct", name: "Live Roulette", category: {id: 1, name: "Live Dealer",}},
  {id: 8, provider: "BetConstruct", name: "Live Bet on Poker", category: {id: 1, name: "Live Dealer",}},
  {id: 9, provider: "BetConstruct", name: "Live Baccarat", category: {id: 1, name: "Live Dealer",}},
  {id: 10, provider: "BetConstruct", name: "Captain Nelson Deluxe", category: {id: 1, name: "Live Dealer",}},
  {id: 11, provider: "BetConstruct", name: "Live Blackjack", category: {id: 1, name: "Live Dealer",}},
  {id: 12, provider: "BetConstruct", name: "Live Roulette", category: {id: 1, name: "Live Dealer",}},
  {id: 13, provider: "BetConstruct", name: "Live Bet on Poker", category: {id: 1, name: "Live Dealer",}},
  {id: 14, provider: "BetConstruct", name: "Live Baccarat", category: {id: 1, name: "Live Dealer",}},
  {id: 15, provider: "BetConstruct", name: "Captain Nelson Deluxe", category: {id: 1, name: "Live Dealer",}},
  {id: 16, provider: "BetConstruct", name: "Live Blackjack", category: {id: 1, name: "Live Dealer",}},
  {id: 17, provider: "BetConstruct", name: "Live Roulette", category: {id: 1, name: "Live Dealer",}},
  {id: 18, provider: "BetConstruct", name: "Live Bet on Poker", category: {id: 1, name: "Live Dealer",}},
  {id: 19, provider: "BetConstruct", name: "Live Baccarat", category: {id: 1, name: "Live Dealer",}},
  {id: 20, provider: "BetConstruct", name: "Captain Nelson Deluxe", category: {id: 1, name: "Live Dealer",}},
  {id: 21, provider: "BetConstruct", name: "Live Blackjack", category: {id: 1, name: "Live Dealer",}},
  {id: 22, provider: "BetConstruct", name: "Live Roulette", category: {id: 1, name: "Live Dealer",}},
  {id: 23, provider: "BetConstruct", name: "Live Bet on Poker", category: {id: 1, name: "Live Dealer",}},
  {id: 24, provider: "BetConstruct", name: "Live Baccarat", category: {id: 1, name: "Live Dealer",}},
  {id: 25, provider: "BetConstruct", name: "Captain Nelson Deluxe", category: {id: 1, name: "Live Dealer",}},
  {id: 26, provider: "BetConstruct", name: "Live Blackjack", category: {id: 1, name: "Live Dealer",}},
  {id: 27, provider: "BetConstruct", name: "Live Roulette", category: {id: 1, name: "Live Dealer",}},
  {id: 28, provider: "BetConstruct", name: "Live Bet on Poker", category: {id: 1, name: "Live Dealer",}},
  {id: 29, provider: "BetConstruct", name: "Live Baccarat", category: {id: 1, name: "Live Dealer",}},
  {id: 30, provider: "BetConstruct", name: "Captain Nelson Deluxe", category: {id: 1, name: "Live Dealer",}},
  {id: 31, provider: "BetConstruct", name: "Live Blackjack", category: {id: 1, name: "Live Dealer",}},
  {id: 32, provider: "BetConstruct", name: "Live Roulette", category: {id: 1, name: "Live Dealer",}},
  {id: 33, provider: "BetConstruct", name: "Live Bet on Poker", category: {id: 1, name: "Live Dealer",}},
  {id: 34, provider: "BetConstruct", name: "Live Baccarat", category: {id: 1, name: "Live Dealer",}},
  {id: 35, provider: "BetConstruct", name: "Captain Nelson Deluxe", category: {id: 1, name: "Live Dealer",}},
  {id: 36, provider: "BetConstruct", name: "Live Blackjack", category: {id: 1, name: "Live Dealer",}},
  {id: 37, provider: "BetConstruct", name: "Live Roulette", category: {id: 1, name: "Live Dealer",}},
  {id: 38, provider: "BetConstruct", name: "Live Bet on Poker", category: {id: 1, name: "Live Dealer",}},
  {id: 39, provider: "BetConstruct", name: "Live Baccarat", category: {id: 1, name: "Live Dealer",}},
  {id: 40, provider: "BetConstruct", name: "Captain Nelson Deluxe", category: {id: 1, name: "Live Dealer",}},
  {id: 41, provider: "BetConstruct", name: "Live Blackjack", category: {id: 1, name: "Live Dealer",}},
  {id: 42, provider: "BetConstruct", name: "Live Roulette", category: {id: 1, name: "Live Dealer",}},
  {id: 43, provider: "BetConstruct", name: "Live Bet on Poker", category: {id: 1, name: "Live Dealer",}},
  {id: 44, provider: "BetConstruct", name: "Live Baccarat", category: {id: 1, name: "Live Dealer",}},
  {id: 45, provider: "BetConstruct", name: "Captain Nelson Deluxe", category: {id: 1, name: "Live Dealer",}},
  {id: 46, provider: "BetConstruct", name: "Live Blackjack", category: {id: 1, name: "Live Dealer",}},
  {id: 47, provider: "BetConstruct", name: "Live Roulette", category: {id: 1, name: "Live Dealer",}},
  {id: 48, provider: "BetConstruct", name: "Live Bet on Poker", category: {id: 1, name: "Live Dealer",}},
  {id: 49, provider: "BetConstruct", name: "Live Baccarat", category: {id: 1, name: "Live Dealer",}},
  {id: 50, provider: "BetConstruct", name: "Captain Nelson Deluxe", category: {id: 1, name: "Live Dealer",}},
  {id: 51, provider: "BetConstruct", name: "Live Blackjack", category: {id: 1, name: "Live Dealer",}},
  {id: 52, provider: "BetConstruct", name: "Live Roulette", category: {id: 1, name: "Live Dealer",}},
  {id: 53, provider: "BetConstruct", name: "Live Bet on Poker", category: {id: 1, name: "Live Dealer",}},
  {id: 54, provider: "BetConstruct", name: "Live Baccarat", category: {id: 1, name: "Live Dealer",}},
  {id: 55, provider: "BetConstruct", name: "Captain Nelson Deluxe", category: {id: 1, name: "Live Dealer",}},
  {id: 56, provider: "BetConstruct", name: "Live Blackjack", category: {id: 1, name: "Live Dealer",}},
  {id: 57, provider: "BetConstruct", name: "Live Roulette", category: {id: 1, name: "Live Dealer",}},
  {id: 58, provider: "BetConstruct", name: "Live Bet on Poker", category: {id: 1, name: "Live Dealer",}},
  {id: 59, provider: "BetConstruct", name: "Live Baccarat", category: {id: 1, name: "Live Dealer",}},
  {id: 60, provider: "BetConstruct", name: "Captain Nelson Deluxe", category: {id: 1, name: "Live Dealer",}},
  {id: 61, provider: "BetConstruct", name: "Live Blackjack", category: {id: 1, name: "Live Dealer",}},
  {id: 62, provider: "BetConstruct", name: "Live Roulette", category: {id: 1, name: "Live Dealer",}},
  {id: 63, provider: "BetConstruct", name: "Live Bet on Poker", category: {id: 1, name: "Live Dealer",}},
  {id: 64, provider: "BetConstruct", name: "Live Baccarat", category: {id: 1, name: "Live Dealer",}},
  {id: 65, provider: "BetConstruct", name: "Captain Nelson Deluxe", category: {id: 1, name: "Live Dealer",}},
  {id: 66, provider: "BetConstruct", name: "Live Blackjack", category: {id: 1, name: "Live Dealer",}},
  {id: 67, provider: "BetConstruct", name: "Live Roulette", category: {id: 1, name: "Live Dealer",}},
  {id: 68, provider: "BetConstruct", name: "Live Bet on Poker", category: {id: 1, name: "Live Dealer",}},
  {id: 69, provider: "BetConstruct", name: "Live Baccarat", category: {id: 1, name: "Live Dealer",}},
  {id: 70, provider: "BetConstruct", name: "Live Baccarat", category: {id: 1, name: "Live Dealer",}},
];
export default function () {

  this.namespace = 'api';

  this.get('/games', (schema, request) => {
    let {page, search} = request.queryParams;
    page = +page || 0;
    const _ = games.filter(game => search ? game.name.toLowerCase().search(search.toLowerCase()) !== -1 : true);
    return {
      page,
      count: Math.floor(_.length / 20),
      games: _.slice(page * 20, (page + 1) * 20),
      search,
    };
  });


  this.put('/games/:id', (schema, request) => {
    const {id} = request.params;
    const {name} = request.requestBody;
    const game = games.find(game => game.id === +id);
    if (!game) {
      return {
        message: "game not exists"
      };
    }
    game.name = name;
    return {message: "ok"};
  });
  // These comments are here to help you get started. Feel free to delete them.

  /*
    Config (with defaults).

    Note: these only affect routes defined *after* them!
  */

  // this.urlPrefix = '';    // make this `http://localhost:8080`, for example, if your API is on a different server
  // this.namespace = '';    // make this `/api`, for example, if your API is namespaced
  // this.timing = 400;      // delay for each request, automatically set to 0 during testing

  /*
    Shorthand cheatsheet:

    this.get('/posts');
    this.post('/posts');
    this.get('/posts/:id');
    this.put('/posts/:id'); // or this.patch
    this.del('/posts/:id');

    https://www.ember-cli-mirage.com/docs/route-handlers/shorthands
  */
}
